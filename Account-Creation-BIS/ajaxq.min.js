// AjaxQ jQuery Plugin
// Copyright (c) 2012 Foliotek Inc.
// MIT License
// https://github.com/Foliotek/ajaxq
!function(e){var n={},t={};e.ajaxq=function(a,r){function i(e){if(n[a])n[a].push(e);else{n[a]=[];var r=e();t[a]=r}}function u(){if(n[a]){var e=n[a].shift();if(e){var r=e();t[a]=r}else delete n[a]}}if("undefined"==typeof r)throw"AjaxQ: queue name is not provided";var o=e.Deferred(),f=o.promise();f.success=f.done,f.error=f.fail,f.complete=f.always;var s=e.extend(!0,{},r);return i(function(){var n=e.ajax.apply(window,[s]);return n.done(function(){o.resolve.apply(this,arguments)}),n.fail(function(){o.reject.apply(this,arguments)}),n.always(u),n}),f},e.each(["getq","postq"],function(n,t){e[t]=function(n,a,r,i,u){return e.isFunction(r)&&(u=u||i,i=r,r=void 0),e.ajaxq(n,{type:"postq"===t?"post":"get",url:a,data:r,success:i,dataType:u})}});var a=function(e){return n.hasOwnProperty(e)},r=function(){for(var e in n)if(a(e))return!0;return!1};e.ajaxq.isRunning=function(e){return e?a(e):r()},e.ajaxq.getActiveRequest=function(e){if(!e)throw"AjaxQ: queue name is required";return t[e]},e.ajaxq.abort=function(n){if(!n)throw"AjaxQ: queue name is required";e.ajaxq.clear(n);var t=e.ajaxq.getActiveRequest(n);t&&t.abort()},e.ajaxq.clear=function(e){if(e)n[e]&&delete n[e];else for(var t in n)n.hasOwnProperty(t)&&delete n[t]}}(jQuery);